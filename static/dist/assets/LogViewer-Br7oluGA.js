import{k as o,o as k,x as y,a as p,h as f,b as e,g as L,l as S,m as D,A as I,v as x,t as n,f as $,y as N,s as O,B as C}from"./index-y_s3za8l.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"log-viewer-page"},U={class:"header"},B={class:"controls"},E=["disabled"],M={class:"auto-refresh"},A={class:"log-container"},F={class:"log-stats"},R={key:0},q={key:1,class:"no-logs"},G={key:0,class:"error-banner"},H={__name:"LogViewer",setup(P){const l=o("tower-echo-brain"),u=o(100),a=o(""),c=o(!1),v=o(!1),i=o(null),h=o(new Date().toLocaleTimeString()),d=o(null);let m=null;async function g(){c.value=!0,i.value=null;try{const r=await O.post("https://vestal-garcia.duckdns.org/api/echo/admin/logs",{service:l.value,lines:u.value},{timeout:5e3});r.data.logs?a.value=r.data.logs:a.value=await w(),h.value=new Date().toLocaleTimeString(),v.value&&(await C(),d.value&&(d.value.scrollTop=d.value.scrollHeight))}catch(r){i.value=`Failed to fetch logs: ${r.message}`;try{a.value=await w(),i.value=null}catch(t){a.value=`Unable to fetch logs. Error: ${t.message}

Make sure the service is running and accessible.`}}finally{c.value=!1}}async function w(){return`[Simulated logs for ${l.value}]
${new Date().toISOString()} INFO Starting service...
${new Date().toISOString()} INFO Service ${l.value} initialized
${new Date().toISOString()} INFO Listening on port...
${new Date().toISOString()} INFO Health check passed
${new Date().toISOString()} DEBUG Processing request...

Note: Direct log access requires backend endpoint implementation.
To view real logs, run: sudo journalctl -u ${l.value} -n ${u.value}`}function b(){a.value="",h.value=new Date().toLocaleTimeString()}function _(){m=setInterval(()=>{v.value&&g()},2e3)}return k(()=>{g(),_()}),y(()=>{m&&clearInterval(m)}),(r,t)=>(f(),p("div",V,[e("div",U,[t[5]||(t[5]=e("h1",null,"SYSTEM LOGS",-1)),e("div",B,[S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),onChange:g,class:"service-select"},[...t[3]||(t[3]=[I('<option value="tower-echo-brain" data-v-2f1309a5>Echo Brain</option><option value="tower-anime-production" data-v-2f1309a5>Anime Production</option><option value="tower-dashboard" data-v-2f1309a5>Dashboard</option><option value="tower-kb" data-v-2f1309a5>Knowledge Base</option><option value="tower-auth" data-v-2f1309a5>Auth Service</option>',5)])],544),[[D,l.value]]),S(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),type:"number",min:"10",max:"1000",class:"line-input",placeholder:"Lines"},null,512),[[x,u.value,void 0,{number:!0}]]),e("button",{onClick:g,disabled:c.value,class:"btn-refresh"},n(c.value?"Loading...":"Refresh"),9,E),e("label",M,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s)},null,512),[[N,v.value]]),t[4]||(t[4]=$(" Auto (2s) ",-1))]),e("button",{onClick:b,class:"btn-clear"},"Clear")])]),e("div",A,[e("div",F,[e("span",null,"Service: "+n(l.value),1),e("span",null,"Lines: "+n(a.value.split(`
`).filter(s=>s).length),1),e("span",null,"Last Updated: "+n(h.value),1)]),e("div",{class:"log-content",ref_key:"logContent",ref:d},[a.value?(f(),p("pre",R,n(a.value),1)):(f(),p("div",q,"No logs available"))],512)]),i.value?(f(),p("div",G,n(i.value),1)):L("",!0)]))}},K=T(H,[["__scopeId","data-v-2f1309a5"]]);export{K as default};
