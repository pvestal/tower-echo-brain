import{d as S,k as d,c as N,o as V,a as n,b as e,g as _,e as f,f as j,u as v,F as k,r as h,n as A,t as u,l as m,v as b,h as o}from"./index-y_s3za8l.js";import{u as $}from"./preferences-C6J-aS0p.js";import{P as D,a as J,T as M}from"./trash-2-CbgbBcPa.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./client-B7vGsIFd.js";const T={class:"flex items-center justify-between mb-8"},B={class:"flex gap-2 mb-6 border-b border-gray-700 pb-4"},F=["onClick"],U={class:"space-y-4"},z={class:"flex items-center gap-2"},E={class:"text-xs px-2 py-1 bg-blue-900 text-blue-300 rounded"},I={class:"font-medium"},K={class:"text-gray-400 mt-1"},L={key:0},q={key:1},G={key:2},H={class:"flex gap-2"},Q=["onClick"],R=["onClick"],W={key:0,class:"text-center py-12 text-gray-500"},X={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},Y={class:"card w-full max-w-lg"},Z={class:"text-xl font-semibold mb-4"},ee={class:"space-y-4"},te=["disabled"],le=["disabled"],se=S({__name:"Preferences",setup(ae){const i=$(),c=d(""),y=d(!1),r=d(null),a=d({category:"",key:"",valueStr:""}),g=N(()=>c.value?i.preferences.filter(s=>s.category===c.value):i.preferences);function P(s){r.value=s,a.value={category:s.category,key:s.key,valueStr:typeof s.value=="string"?s.value:JSON.stringify(s.value,null,2)}}function w(s){confirm(`Delete preference "${s.key}"?`)&&i.deletePreference(s.id)}function p(){y.value=!1,r.value=null,a.value={category:"",key:"",valueStr:""}}async function C(){let s;try{s=JSON.parse(a.value.valueStr)}catch{s=a.value.valueStr}r.value?await i.updatePreference(r.value.id,s):await i.createPreference({category:a.value.category,key:a.value.key,value:s}),p()}return V(()=>i.fetchPreferences()),(s,l)=>(o(),n("div",null,[e("div",T,[l[5]||(l[5]=e("h1",{class:"text-3xl font-bold"},"Preferences",-1)),e("button",{onClick:l[0]||(l[0]=t=>y.value=!0),class:"btn btn-primary flex items-center gap-2"},[f(v(D),{class:"w-4 h-4"}),l[4]||(l[4]=j(" Add Preference ",-1))])]),e("div",B,[(o(!0),n(k,null,h(["all",...v(i).categories],t=>(o(),n("button",{key:t,onClick:x=>c.value=t==="all"?"":t,class:A(["px-4 py-2 rounded-lg transition-colors",t==="all"&&!c.value||c.value===t?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},u(t==="all"?"All":t),11,F))),128))]),e("div",U,[(o(!0),n(k,null,h(g.value,t=>(o(),n("div",{key:t.id,class:"card flex items-center justify-between"},[e("div",null,[e("div",z,[e("span",E,u(t.category),1),e("span",I,u(t.key),1)]),e("div",K,[Array.isArray(t.value)?(o(),n("span",L,u(t.value.join(", ")),1)):typeof t.value=="object"?(o(),n("span",q,u(JSON.stringify(t.value)),1)):(o(),n("span",G,u(t.value),1))])]),e("div",H,[e("button",{onClick:x=>P(t),class:"text-gray-400 hover:text-blue-400"},[f(v(J),{class:"w-4 h-4"})],8,Q),e("button",{onClick:x=>w(t),class:"text-gray-400 hover:text-red-400"},[f(v(M),{class:"w-4 h-4"})],8,R)])]))),128)),g.value.length===0?(o(),n("div",W," No preferences found. ")):_("",!0)]),y.value||r.value?(o(),n("div",X,[e("div",Y,[e("h3",Z,u(r.value?"Edit Preference":"Add Preference"),1),e("div",ee,[e("div",null,[l[6]||(l[6]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Category",-1)),m(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.category=t),type:"text",class:"input w-full",placeholder:"music, anime, communication, etc.",disabled:!!r.value},null,8,te),[[b,a.value.category]])]),e("div",null,[l[7]||(l[7]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Key",-1)),m(e("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.key=t),type:"text",class:"input w-full",placeholder:"favorite_genres, preferred_style, etc.",disabled:!!r.value},null,8,le),[[b,a.value.key]])]),e("div",null,[l[8]||(l[8]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Value (JSON or plain text)",-1)),m(e("textarea",{"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.valueStr=t),class:"input w-full h-32",placeholder:'["rock", "electronic"] or just plain text'},null,512),[[b,a.value.valueStr]])])]),e("div",{class:"flex justify-end gap-3 mt-6"},[e("button",{onClick:p,class:"btn btn-secondary"},"Cancel"),e("button",{onClick:C,class:"btn btn-primary"},"Save")])])])):_("",!0)]))}}),ce=O(se,[["__scopeId","data-v-94ffb713"]]);export{ce as default};
