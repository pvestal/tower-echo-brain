import{p as y,k as c,c as p}from"./index-y_s3za8l.js";import{a as s}from"./client-B7vGsIFd.js";const o={async list(){const{data:t}=await s.get("/api/integrations");return t.integrations},async get(t){const{data:a}=await s.get(`/api/integrations/${t}`);return a.integration},async connect(t){const{data:a}=await s.post(`/api/integrations/${t}/connect`);return a},async disconnect(t){await s.delete(`/api/integrations/${t}`)},async sync(t){const{data:a}=await s.post(`/api/integrations/${t}/sync`);return a}},w=y("integrations",()=>{const t=c([]),a=c(!1),i=c(null),u=p(()=>t.value.filter(n=>n.status==="connected"));async function r(){a.value=!0;try{t.value=await o.list()}catch(n){i.value=n.message}finally{a.value=!1}}async function g(n){try{await o.disconnect(n),await r()}catch(e){throw i.value=e.message,e}}async function l(n){try{await o.sync(n)}catch(e){throw i.value=e.message,e}}return{integrations:t,connected:u,loading:a,error:i,fetchIntegrations:r,disconnect:g,sync:l}});export{w as u};
