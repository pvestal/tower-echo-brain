import{i as x,d as T,k as u,o as M,a as v,b as e,g as h,e as m,f as w,u as o,F as S,r as $,t as d,n as b,q as C,l as _,v as f,h as i}from"./index-y_s3za8l.js";import{u as z}from"./vault-wcEIHuZ9.js";import{P as B,a as I,T as P}from"./trash-2-CbgbBcPa.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./client-B7vGsIFd.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=x("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=x("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=x("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),F={class:"flex items-center justify-between mb-8"},L={class:"bg-yellow-900/30 border border-yellow-700 rounded-lg p-4 mb-6 flex items-center gap-3"},E={class:"card"},R={class:"w-full"},X={class:"py-4"},Y={class:"py-4 font-mono text-sm"},G={class:"py-4"},H={class:"py-4"},J={class:"flex gap-2"},O=["onClick","disabled"],Q=["onClick"],W=["onClick"],Z={class:"flex items-center gap-2"},ee={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},te={class:"card w-full max-w-lg"},se={class:"text-xl font-semibold mb-4"},le={class:"space-y-4"},ae=["disabled"],ne=["disabled"],oe=T({__name:"Vault",setup(ie){const c=z(),p=u(!1),n=u(null),y=u(null),r=u(null),l=u({service:"",key_name:"",value:""});async function K(a){y.value=a.key_name;try{r.value=await c.testKey(a.key_name),setTimeout(()=>r.value=null,3e3)}finally{y.value=null}}function V(a){n.value=a,l.value={service:a.service,key_name:a.key_name,value:""}}function A(a){confirm(`Delete key "${a.key_name}"?`)&&c.deleteKey(a.key_name)}function g(){p.value=!1,n.value=null,l.value={service:"",key_name:"",value:""}}async function N(){const a=n.value?n.value.key_name:`${l.value.service}.${l.value.key_name}`;await c.createKey({key_name:a,value:l.value.value,service:l.value.service}),g()}return M(()=>c.fetchKeys()),(a,t)=>(i(),v("div",null,[e("div",F,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Vault"),e("p",{class:"text-gray-400 mt-1"},"API keys and secrets (values never displayed)")],-1)),e("button",{onClick:t[0]||(t[0]=s=>p.value=!0),class:"btn btn-primary flex items-center gap-2"},[m(o(B),{class:"w-4 h-4"}),t[4]||(t[4]=w(" Add Key ",-1))])]),e("div",L,[m(o(q),{class:"w-5 h-5 text-yellow-500 flex-shrink-0"}),t[6]||(t[6]=e("p",{class:"text-yellow-200 text-sm"}," API key values are stored securely and never displayed in the UI. You can test, update, or delete keys. ",-1))]),e("div",E,[e("table",R,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"text-left text-gray-400 border-b border-gray-700"},[e("th",{class:"pb-3"},"Service"),e("th",{class:"pb-3"},"Key Name"),e("th",{class:"pb-3"},"Status"),e("th",{class:"pb-3"},"Actions")])],-1)),e("tbody",null,[(i(!0),v(S,null,$(o(c).keys,s=>(i(),v("tr",{key:s.key_name,class:"border-b border-gray-700 last:border-0"},[e("td",X,d(s.service),1),e("td",Y,d(s.key_name),1),e("td",G,[e("span",{class:b(["flex items-center gap-2",s.is_set?"text-green-400":"text-gray-500"])},[e("span",{class:b(["w-2 h-2 rounded-full",s.is_set?"bg-green-400":"bg-gray-500"])},null,2),w(" "+d(s.is_set?"Set":"Not set"),1)],2)]),e("td",H,[e("div",J,[e("button",{onClick:k=>K(s),class:"btn btn-secondary text-sm py-1",disabled:y.value===s.key_name},d(y.value===s.key_name?"Testing...":"Test"),9,O),e("button",{onClick:k=>V(s),class:"text-gray-400 hover:text-blue-400"},[m(o(I),{class:"w-4 h-4"})],8,Q),e("button",{onClick:k=>A(s),class:"text-gray-400 hover:text-red-400"},[m(o(P),{class:"w-4 h-4"})],8,W)])])]))),128))])])]),r.value?(i(),v("div",{key:0,class:b(["fixed bottom-4 right-4 p-4 rounded-lg shadow-lg",r.value.valid?"bg-green-900":"bg-red-900"])},[e("div",Z,[r.value.valid?(i(),C(o(j),{key:0,class:"w-5 h-5 text-green-400"})):(i(),C(o(D),{key:1,class:"w-5 h-5 text-red-400"})),e("span",null,d(r.value.message),1)])],2)):h("",!0),p.value||n.value?(i(),v("div",ee,[e("div",te,[e("h3",se,d(n.value?"Update Key":"Add New Key"),1),e("div",le,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Service",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.service=s),type:"text",class:"input w-full",placeholder:"openai, anthropic, plaid, etc.",disabled:!!n.value},null,8,ae),[[f,l.value.service]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Key Name",-1)),_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.key_name=s),type:"text",class:"input w-full",placeholder:"api_key, client_id, etc.",disabled:!!n.value},null,8,ne),[[f,l.value.key_name]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Value",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.value=s),type:"password",class:"input w-full",placeholder:"sk-..."},null,512),[[f,l.value.value]])])]),e("div",{class:"flex justify-end gap-3 mt-6"},[e("button",{onClick:g,class:"btn btn-secondary"},"Cancel"),e("button",{onClick:N,class:"btn btn-primary"},"Save")])])])):h("",!0)]))}}),ye=U(oe,[["__scopeId","data-v-c6626cd6"]]);export{ye as default};
