import{p as w,k as i}from"./index-y_s3za8l.js";import{a as n}from"./client-B7vGsIFd.js";const o={async list(e){const t=e?{category:e}:{},{data:s}=await n.get("/api/preferences",{params:t});return s},async getCategory(e){const{data:t}=await n.get(`/api/preferences/${e}`);return t},async create(e){const{data:t}=await n.post("/api/preferences",e);return t},async update(e,t){const{data:s}=await n.put(`/api/preferences/${e}`,t);return s},async delete(e){await n.delete(`/api/preferences/${e}`)}},v=w("preferences",()=>{const e=i([]),t=i([]),s=i(!1),c=i(null);async function f(r){s.value=!0;try{const a=await o.list(r);e.value=a.preferences,t.value=a.categories}catch(a){c.value=a.message}finally{s.value=!1}}async function p(r){try{await o.create(r),await f()}catch(a){throw c.value=a.message,a}}async function l(r,a){try{await o.update(r,{value:a}),await f()}catch(u){throw c.value=u.message,u}}async function d(r){try{await o.delete(r),e.value=e.value.filter(a=>a.id!==r)}catch(a){throw c.value=a.message,a}}return{preferences:e,categories:t,loading:s,error:c,fetchPreferences:f,createPreference:p,updatePreference:l,deletePreference:d}});export{v as u};
