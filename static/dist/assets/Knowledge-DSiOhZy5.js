import{i as N,j as A,d as I,k as x,o as K,a as c,b as e,g as C,e as w,f as D,u as p,l as _,v as k,m as W,F as S,r as T,t as d,h as u}from"./index-y_s3za8l.js";import{u as E}from"./knowledge-BrpjMASL.js";import{P as L,a as O,T as z}from"./trash-2-CbgbBcPa.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./client-B7vGsIFd.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=N("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const B=()=>{};function H(f,l){function n(...a){return new Promise((v,o)=>{Promise.resolve(f(()=>l.apply(this,a),{fn:l,thisArg:this,args:a})).then(v).catch(o)})}return n}function Q(f,l={}){let n,a,v=B;const o=b=>{clearTimeout(b),v(),v=B};let i;return b=>{const j=A(f),y=A(l.maxWait);return n&&o(n),j<=0||y!==void 0&&y<=0?(a&&(o(a),a=void 0),Promise.resolve(b())):new Promise((g,F)=>{v=l.rejectOnCancel?F:g,i=b,y&&!a&&(a=setTimeout(()=>{n&&o(n),a=void 0,g(i())},y)),n=setTimeout(()=>{a&&o(a),a=void 0,g(b())},j)})}}function R(f,l=200,n={}){return H(Q(l,n),f)}const q={class:"flex items-center justify-between mb-8"},J={class:"flex gap-4 mb-6"},X={class:"flex-1"},Y=["value"],Z={key:0,class:"text-center py-8 text-gray-400"},ee={key:1,class:"space-y-6"},te={class:"text-xl font-semibold text-blue-400 mb-4 flex items-center gap-2"},se={class:"text-sm text-gray-500"},le={class:"space-y-2"},ae={class:"text-gray-400"},oe={class:"text-white ml-2"},ne={class:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-2"},ie=["onClick"],ce=["onClick"],ue={key:0,class:"text-center py-12 text-gray-500"},re={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},de={class:"card w-full max-w-lg"},pe={class:"text-xl font-semibold mb-4"},ve={class:"space-y-4"},be={class:"flex justify-end gap-3 mt-6"},me={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},fe={class:"card w-full max-w-md"},ye={class:"bg-gray-700 rounded-lg p-3 mb-6"},xe={class:"text-blue-400"},ge={class:"text-gray-400 mx-2"},he={class:"text-white"},_e={class:"flex justify-end gap-3"},je=I({__name:"Knowledge",setup(f){const l=E(),n=x(""),a=x(""),v=x(!1),o=x(null),i=x(null),r=x({subject:"",predicate:"",object:""}),b=R(()=>{l.fetchFacts({search:n.value||void 0})},300);function j(){l.fetchFacts({subject:a.value||void 0})}function y(m){o.value=m,r.value={subject:m.subject,predicate:m.predicate,object:m.object}}function g(m){i.value=m}async function F(){i.value&&(await l.deleteFact(i.value.id),i.value=null)}function V(){v.value=!1,o.value=null,r.value={subject:"",predicate:"",object:""}}async function U(){o.value?await l.updateFact(o.value.id,r.value):await l.createFact(r.value),V()}return K(()=>{l.fetchFacts(),l.fetchSubjects()}),(m,t)=>(u(),c("div",null,[e("div",q,[t[9]||(t[9]=e("h1",{class:"text-3xl font-bold"},"Knowledge Browser",-1)),e("button",{onClick:t[0]||(t[0]=s=>v.value=!0),class:"btn btn-primary flex items-center gap-2"},[w(p(L),{class:"w-4 h-4"}),t[8]||(t[8]=D(" Add Fact ",-1))])]),e("div",J,[e("div",X,[_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s),onInput:t[2]||(t[2]=(...s)=>p(b)&&p(b)(...s)),type:"text",placeholder:"Search facts...",class:"input w-full"},null,544),[[k,n.value]])]),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value=s),onChange:j,class:"input"},[t[10]||(t[10]=e("option",{value:""},"All Subjects",-1)),(u(!0),c(S,null,T(p(l).subjects,s=>(u(),c("option",{key:s.name,value:s.name},d(s.name)+" ("+d(s.count)+") ",9,Y))),128))],544),[[W,a.value]])]),p(l).loading?(u(),c("div",Z," Loading... ")):(u(),c("div",ee,[(u(!0),c(S,null,T(p(l).factsBySubject,(s,P)=>(u(),c("div",{key:P,class:"card"},[e("h2",te,[w(p($),{class:"w-5 h-5"}),D(" "+d(P)+" ",1),e("span",se,"("+d(s.length)+" facts)",1)]),e("div",le,[(u(!0),c(S,null,T(s,h=>(u(),c("div",{key:h.id,class:"flex items-center justify-between py-2 border-b border-gray-700 last:border-0 group"},[e("div",null,[e("span",ae,d(h.predicate),1),e("span",oe,d(h.object),1)]),e("div",ne,[e("button",{onClick:M=>y(h),class:"text-gray-400 hover:text-blue-400"},[w(p(O),{class:"w-4 h-4"})],8,ie),e("button",{onClick:M=>g(h),class:"text-gray-400 hover:text-red-400"},[w(p(z),{class:"w-4 h-4"})],8,ce)])]))),128))])]))),128)),Object.keys(p(l).factsBySubject).length===0?(u(),c("div",ue," No facts found. Add some knowledge! ")):C("",!0)])),v.value||o.value?(u(),c("div",re,[e("div",de,[e("h3",pe,d(o.value?"Edit Fact":"Add New Fact"),1),e("div",ve,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Subject",-1)),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.subject=s),type:"text",class:"input w-full",placeholder:"Patrick, Tower server, etc."},null,512),[[k,r.value.subject]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Predicate (relationship)",-1)),_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.predicate=s),type:"text",class:"input w-full",placeholder:"drives, owns, has, uses, etc."},null,512),[[k,r.value.predicate]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm text-gray-400 mb-1"},"Object (value)",-1)),_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.object=s),type:"text",class:"input w-full",placeholder:"2022 Toyota Tundra 1794 Edition"},null,512),[[k,r.value.object]])])]),e("div",be,[e("button",{onClick:V,class:"btn btn-secondary"},"Cancel"),e("button",{onClick:U,class:"btn btn-primary"},d(o.value?"Update":"Add")+" Fact ",1)])])])):C("",!0),i.value?(u(),c("div",me,[e("div",fe,[t[14]||(t[14]=e("h3",{class:"text-xl font-semibold mb-4"},"Delete Fact?",-1)),t[15]||(t[15]=e("p",{class:"text-gray-400 mb-4"}," Are you sure you want to delete this fact? ",-1)),e("div",ye,[e("span",xe,d(i.value.subject),1),e("span",ge,d(i.value.predicate),1),e("span",he,d(i.value.object),1)]),e("div",_e,[e("button",{onClick:t[7]||(t[7]=s=>i.value=null),class:"btn btn-secondary"},"Cancel"),e("button",{onClick:F,class:"btn btn-danger"},"Delete")])])])):C("",!0)]))}}),Te=G(je,[["__scopeId","data-v-028504d0"]]);export{Te as default};
