import{k as v,a as r,h as d,b as e,g as k,l as g,v as x,z as N,t as i,n as b,F as w,r as q,s as E}from"./index-y_s3za8l.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"chat-test"},D={class:"test-panel"},M={class:"query-section"},O={class:"query-input"},I=["disabled"],R=["disabled"],$={class:"presets"},B={key:0,class:"response-section"},F={class:"response-box"},H={class:"response-text"},J={class:"response-meta"},L={class:"meta-item"},P={class:"meta-value"},V={class:"meta-item"},z={class:"meta-value"},G={class:"meta-item"},K={key:1,class:"error-box"},Q={class:"history-panel"},U={key:0,class:"no-history"},W={key:1,class:"history-list"},j=["onClick"],X={class:"history-query"},Y={class:"history-meta"},Z={class:"history-time"},ee={__name:"ChatTest",setup(se){const a=v('Return exactly: {"test": 1}'),n=v(null),m=v(null),c=v(!1),u=v([]);function f(o){return[/the scene/i,/cyber.?goblin/i,/mei/i,/anime/i,/character/i,/narrative/i,/story/i,/In this .* scene/i,/The .* unfolds/i].some(t=>t.test(o))}async function h(){var s,t;if(!a.value.trim())return;c.value=!0,m.value=null,n.value=null;const o=Date.now();try{const l=await E.post("https://vestal-garcia.duckdns.org/api/echo/chat",{query:a.value,temperature:0,max_tokens:500},{timeout:12e4}),p=Date.now()-o,y=l.data.response||l.data.message||JSON.stringify(l.data),_=f(y);n.value={text:y,model:l.data.model||"unknown",time:p,contaminated:_},u.value.unshift({query:a.value,response:y,model:l.data.model||"unknown",time:p,contaminated:_}),u.value.length>10&&(u.value=u.value.slice(0,10))}catch(l){m.value=((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.detail)||l.message||"Unknown error"}finally{c.value=!1}}function C(o){a.value=o.query,n.value={text:o.response,model:o.model,time:o.time,contaminated:o.contaminated}}function T(){a.value='Return exactly: {"test": 1}'}return(o,s)=>(d(),r("div",A,[s[12]||(s[12]=e("div",{class:"header"},[e("h1",null,"ECHO TEST")],-1)),e("div",D,[e("div",M,[s[4]||(s[4]=e("label",null,"Query:",-1)),e("div",O,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),onKeyup:N(h,["enter"]),placeholder:'Return: {"test": 1}',disabled:c.value},null,40,I),[[x,a.value]]),e("button",{onClick:h,disabled:c.value,class:"btn-send"},i(c.value?"Sending...":"Send"),9,R)])]),e("div",$,[s[5]||(s[5]=e("span",null,"Quick tests:",-1)),e("button",{onClick:T,class:"preset"}," JSON Test "),e("button",{onClick:s[1]||(s[1]=t=>a.value="What is 2+2?"),class:"preset"}," Simple Math "),e("button",{onClick:s[2]||(s[2]=t=>a.value="What model are you using?"),class:"preset"}," Model Check "),e("button",{onClick:s[3]||(s[3]=t=>a.value="Generate a Python hello world function"),class:"preset"}," Code Gen ")]),n.value?(d(),r("div",B,[s[9]||(s[9]=e("h3",null,"Response:",-1)),e("div",F,[e("pre",H,i(n.value.text),1),e("div",J,[e("div",L,[s[6]||(s[6]=e("span",{class:"meta-label"},"Model:",-1)),e("span",P,i(n.value.model),1)]),e("div",V,[s[7]||(s[7]=e("span",{class:"meta-label"},"Time:",-1)),e("span",z,i(n.value.time)+"ms",1)]),e("div",G,[s[8]||(s[8]=e("span",{class:"meta-label"},"Status:",-1)),e("span",{class:b(["meta-value",n.value.contaminated?"failed":"passed"])},i(n.value.contaminated?"✗ CONTAMINATED":"✓ CLEAN")+" "+i(n.value.contaminated?"(narrative detected)":"(no contamination)"),3)])])])])):k("",!0),m.value?(d(),r("div",K,[s[10]||(s[10]=e("h3",null,"Error:",-1)),e("pre",null,i(m.value),1)])):k("",!0)]),e("div",Q,[s[11]||(s[11]=e("h2",null,"Test History",-1)),u.value.length===0?(d(),r("div",U,"No tests run yet")):(d(),r("div",W,[(d(!0),r(w,null,q(u.value,(t,l)=>(d(),r("div",{key:l,class:"history-item",onClick:p=>C(t)},[e("div",X,i(t.query),1),e("div",Y,[e("span",{class:b(t.contaminated?"status-bad":"status-good")},i(t.contaminated?"CONTAMINATED":"CLEAN"),3),e("span",Z,i(t.time)+"ms",1)])],8,j))),128))]))])]))}},ne=S(ee,[["__scopeId","data-v-a2137840"]]);export{ne as default};
