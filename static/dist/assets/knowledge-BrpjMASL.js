import{p as v,k as u,c as F}from"./index-y_s3za8l.js";import{a as n}from"./client-B7vGsIFd.js";const l={async listFacts(t){const{data:c}=await n.get("/api/knowledge/facts",{params:t});return c},async getFact(t){const{data:c}=await n.get(`/api/knowledge/facts/${t}`);return c.fact},async createFact(t){const{data:c}=await n.post("/api/knowledge/facts",t);return c},async updateFact(t,c){const{data:o}=await n.put(`/api/knowledge/facts/${t}`,c);return o},async deleteFact(t){await n.delete(`/api/knowledge/facts/${t}`)},async listSubjects(){const{data:t}=await n.get("/api/knowledge/subjects");return t.subjects},async getFactsAbout(t){const{data:c}=await n.get(`/api/knowledge/about/${encodeURIComponent(t)}`);return c}},h=v("knowledge",()=>{const t=u([]),c=u([]),o=u(!1),s=u(null),d=u(0),f=F(()=>{const e={};for(const a of t.value)e[a.subject]||(e[a.subject]=[]),e[a.subject].push(a);return e});async function i(e){o.value=!0,s.value=null;try{const a=await l.listFacts({...e,limit:500});t.value=a.facts,d.value=a.total}catch(a){s.value=a.message}finally{o.value=!1}}async function r(){try{c.value=await l.listSubjects()}catch(e){s.value=e.message}}async function g(e){try{await l.createFact(e),await i(),await r()}catch(a){throw s.value=a.message,a}}async function p(e,a){try{await l.updateFact(e,a),await i()}catch(w){throw s.value=w.message,w}}async function y(e){try{await l.deleteFact(e),t.value=t.value.filter(a=>a.id!==e),await r()}catch(a){throw s.value=a.message,a}}return{facts:t,subjects:c,loading:o,error:s,total:d,factsBySubject:f,fetchFacts:i,fetchSubjects:r,createFact:g,updateFact:p,deleteFact:y}});export{h as u};
